import{d as te,r as ne,a as j}from"./@intlify_shared@11.0.1-i7e918a7.js";/*!
  * message-compiler v11.0.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function ke(r,n,c){return{line:r,column:n,offset:c}}function J(r,n,c){return{start:r,end:n}}const C={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},Be=17;function re(r,n,c={}){const{domain:l,messages:p,args:u}=c,k=r,h=new SyntaxError(String(k));return h.code=r,n&&(h.location=n),h.domain=l,h}function Ve(r){throw r}const X=" ",Ae="\r",O=`
`,Pe="\u2028",ye="\u2029";function me(r){const n=r;let c=0,l=1,p=1,u=0;const k=N=>n[N]===Ae&&n[N+1]===O,h=N=>n[N]===O,T=N=>n[N]===ye,b=N=>n[N]===Pe,D=N=>k(N)||h(N)||T(N)||b(N),I=()=>c,S=()=>l,v=()=>p,U=()=>u,y=N=>k(N)||T(N)||b(N)?O:n[N],_=()=>y(c),s=()=>y(c+u);function a(){return u=0,D(c)&&(l++,p=0),k(c)&&c++,c++,p++,n[c]}function E(){return k(c+u)&&u++,u++,n[c+u]}function o(){c=0,l=1,p=1,u=0}function d(N=0){u=N}function L(){const N=c+u;for(;N!==c;)a();u=0}return{index:I,line:S,column:v,peekOffset:U,charAt:y,currentChar:_,currentPeek:s,next:a,peek:E,reset:o,resetPeek:d,skipToPeek:L}}const Y=void 0,Oe=".",Z="'",be="tokenizer";function De(r,n={}){const c=n.location!==!1,l=me(r),p=()=>l.index(),u=()=>ke(l.line(),l.column(),l.index()),k=u(),h=p(),T={currentType:13,offset:h,startLoc:k,endLoc:k,lastType:13,lastOffset:h,lastStartLoc:k,lastEndLoc:k,braceNest:0,inLinked:!1,text:""},b=()=>T,{onError:D}=n;function I(e,t,i,...f){const A=b();if(t.column+=i,t.offset+=i,D){const P=c?J(A.startLoc,t):null,R=re(e,P,{domain:be,args:f});D(R)}}function S(e,t,i){e.endLoc=u(),e.currentType=t;const f={type:t};return c&&(f.loc=J(e.startLoc,e.endLoc)),i!=null&&(f.value=i),f}const v=e=>S(e,13);function U(e,t){return e.currentChar()===t?(e.next(),t):(I(C.EXPECTED_TOKEN,u(),0,t),"")}function y(e){let t="";for(;e.currentPeek()===X||e.currentPeek()===O;)t+=e.currentPeek(),e.peek();return t}function _(e){const t=y(e);return e.skipToPeek(),t}function s(e){if(e===Y)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t===95}function a(e){if(e===Y)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}function E(e,t){const{currentType:i}=t;if(i!==2)return!1;y(e);const f=s(e.currentPeek());return e.resetPeek(),f}function o(e,t){const{currentType:i}=t;if(i!==2)return!1;y(e);const f=e.currentPeek()==="-"?e.peek():e.currentPeek(),A=a(f);return e.resetPeek(),A}function d(e,t){const{currentType:i}=t;if(i!==2)return!1;y(e);const f=e.currentPeek()===Z;return e.resetPeek(),f}function L(e,t){const{currentType:i}=t;if(i!==7)return!1;y(e);const f=e.currentPeek()===".";return e.resetPeek(),f}function N(e,t){const{currentType:i}=t;if(i!==8)return!1;y(e);const f=s(e.currentPeek());return e.resetPeek(),f}function w(e,t){const{currentType:i}=t;if(!(i===7||i===11))return!1;y(e);const f=e.currentPeek()===":";return e.resetPeek(),f}function m(e,t){const{currentType:i}=t;if(i!==9)return!1;const f=()=>{const P=e.currentPeek();return P==="{"?s(e.peek()):P==="@"||P==="|"||P===":"||P==="."||P===X||!P?!1:P===O?(e.peek(),f()):G(e,!1)},A=f();return e.resetPeek(),A}function $(e){y(e);const t=e.currentPeek()==="|";return e.resetPeek(),t}function G(e,t=!0){const i=(A=!1,P="")=>{const R=e.currentPeek();return R==="{"||R==="@"||!R?A:R==="|"?!(P===X||P===O):R===X?(e.peek(),i(!0,X)):R===O?(e.peek(),i(!0,O)):!0},f=i();return t&&e.resetPeek(),f}function g(e,t){const i=e.currentChar();return i===Y?Y:t(i)?(e.next(),i):null}function se(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===95||t===36}function ie(e){return g(e,se)}function ce(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===95||t===36||t===45}function ue(e){return g(e,ce)}function ae(e){const t=e.charCodeAt(0);return t>=48&&t<=57}function oe(e){return g(e,ae)}function le(e){const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function fe(e){return g(e,le)}function W(e){let t="",i="";for(;t=oe(e);)i+=t;return i}function Ee(e){let t="";for(;;){const i=e.currentChar();if(i==="{"||i==="}"||i==="@"||i==="|"||!i)break;if(i===X||i===O)if(G(e))t+=i,e.next();else{if($(e))break;t+=i,e.next()}else t+=i,e.next()}return t}function de(e){_(e);let t="",i="";for(;t=ue(e);)i+=t;return e.currentChar()===Y&&I(C.UNTERMINATED_CLOSING_BRACE,u(),0),i}function Le(e){_(e);let t="";return e.currentChar()==="-"?(e.next(),t+=`-${W(e)}`):t+=W(e),e.currentChar()===Y&&I(C.UNTERMINATED_CLOSING_BRACE,u(),0),t}function pe(e){return e!==Z&&e!==O}function Ne(e){_(e),U(e,"'");let t="",i="";for(;t=g(e,pe);)t==="\\"?i+=_e(e):i+=t;const f=e.currentChar();return f===O||f===Y?(I(C.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,u(),0),f===O&&(e.next(),U(e,"'")),i):(U(e,"'"),i)}function _e(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return q(e,t,4);case"U":return q(e,t,6);default:return I(C.UNKNOWN_ESCAPE_SEQUENCE,u(),0,t),""}}function q(e,t,i){U(e,t);let f="";for(let A=0;A<i;A++){const P=fe(e);if(!P){I(C.INVALID_UNICODE_ESCAPE_SEQUENCE,u(),0,`\\${t}${f}${e.currentChar()}`);break}f+=P}return`\\${t}${f}`}function he(e){return e!=="{"&&e!=="}"&&e!==X&&e!==O}function Ce(e){_(e);let t="",i="";for(;t=g(e,he);)i+=t;return i}function Te(e){let t="",i="";for(;t=ie(e);)i+=t;return i}function Ie(e){const t=i=>{const f=e.currentChar();return f==="{"||f==="@"||f==="|"||f==="("||f===")"||!f||f===X?i:(i+=f,e.next(),t(i))};return t("")}function F(e){_(e);const t=U(e,"|");return _(e),t}function B(e,t){let i=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&I(C.NOT_ALLOW_NEST_PLACEHOLDER,u(),0),e.next(),i=S(t,2,"{"),_(e),t.braceNest++,i;case"}":return t.braceNest>0&&t.currentType===2&&I(C.EMPTY_PLACEHOLDER,u(),0),e.next(),i=S(t,3,"}"),t.braceNest--,t.braceNest>0&&_(e),t.inLinked&&t.braceNest===0&&(t.inLinked=!1),i;case"@":return t.braceNest>0&&I(C.UNTERMINATED_CLOSING_BRACE,u(),0),i=x(e,t)||v(t),t.braceNest=0,i;default:{let A=!0,P=!0,R=!0;if($(e))return t.braceNest>0&&I(C.UNTERMINATED_CLOSING_BRACE,u(),0),i=S(t,1,F(e)),t.braceNest=0,t.inLinked=!1,i;if(t.braceNest>0&&(t.currentType===4||t.currentType===5||t.currentType===6))return I(C.UNTERMINATED_CLOSING_BRACE,u(),0),t.braceNest=0,V(e,t);if(A=E(e,t))return i=S(t,4,de(e)),_(e),i;if(P=o(e,t))return i=S(t,5,Le(e)),_(e),i;if(R=d(e,t))return i=S(t,6,Ne(e)),_(e),i;if(!A&&!P&&!R)return i=S(t,12,Ce(e)),I(C.INVALID_TOKEN_IN_PLACEHOLDER,u(),0,i.value),_(e),i;break}}return i}function x(e,t){const{currentType:i}=t;let f=null;const A=e.currentChar();switch((i===7||i===8||i===11||i===9)&&(A===O||A===X)&&I(C.INVALID_LINKED_FORMAT,u(),0),A){case"@":return e.next(),f=S(t,7,"@"),t.inLinked=!0,f;case".":return _(e),e.next(),S(t,8,".");case":":return _(e),e.next(),S(t,9,":");default:return $(e)?(f=S(t,1,F(e)),t.braceNest=0,t.inLinked=!1,f):L(e,t)||w(e,t)?(_(e),x(e,t)):N(e,t)?(_(e),S(t,11,Te(e))):m(e,t)?(_(e),A==="{"?B(e,t)||f:S(t,10,Ie(e))):(i===7&&I(C.INVALID_LINKED_FORMAT,u(),0),t.braceNest=0,t.inLinked=!1,V(e,t))}}function V(e,t){let i={type:13};if(t.braceNest>0)return B(e,t)||v(t);if(t.inLinked)return x(e,t)||v(t);switch(e.currentChar()){case"{":return B(e,t)||v(t);case"}":return I(C.UNBALANCED_CLOSING_BRACE,u(),0),e.next(),S(t,3,"}");case"@":return x(e,t)||v(t);default:{if($(e))return i=S(t,1,F(e)),t.braceNest=0,t.inLinked=!1,i;if(G(e))return S(t,0,Ee(e));break}}return i}function Se(){const{currentType:e,offset:t,startLoc:i,endLoc:f}=T;return T.lastType=e,T.lastOffset=t,T.lastStartLoc=i,T.lastEndLoc=f,T.offset=p(),T.startLoc=u(),l.currentChar()===Y?S(T,13):V(l,T)}return{nextToken:Se,currentOffset:p,currentPosition:u,context:b}}const ve="parser",Re=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Ue(r,n,c){switch(r){case"\\\\":return"\\";case"\\'":return"'";default:{const l=parseInt(n||c,16);return l<=55295||l>=57344?String.fromCodePoint(l):"�"}}}function Me(r={}){const n=r.location!==!1,{onError:c}=r;function l(s,a,E,o,...d){const L=s.currentPosition();if(L.offset+=o,L.column+=o,c){const N=n?J(E,L):null,w=re(a,N,{domain:ve,args:d});c(w)}}function p(s,a,E){const o={type:s};return n&&(o.start=a,o.end=a,o.loc={start:E,end:E}),o}function u(s,a,E,o){n&&(s.end=a,s.loc&&(s.loc.end=E))}function k(s,a){const E=s.context(),o=p(3,E.offset,E.startLoc);return o.value=a,u(o,s.currentOffset(),s.currentPosition()),o}function h(s,a){const E=s.context(),{lastOffset:o,lastStartLoc:d}=E,L=p(5,o,d);return L.index=parseInt(a,10),s.nextToken(),u(L,s.currentOffset(),s.currentPosition()),L}function T(s,a){const E=s.context(),{lastOffset:o,lastStartLoc:d}=E,L=p(4,o,d);return L.key=a,s.nextToken(),u(L,s.currentOffset(),s.currentPosition()),L}function b(s,a){const E=s.context(),{lastOffset:o,lastStartLoc:d}=E,L=p(9,o,d);return L.value=a.replace(Re,Ue),s.nextToken(),u(L,s.currentOffset(),s.currentPosition()),L}function D(s){const a=s.nextToken(),E=s.context(),{lastOffset:o,lastStartLoc:d}=E,L=p(8,o,d);return a.type!==11?(l(s,C.UNEXPECTED_EMPTY_LINKED_MODIFIER,E.lastStartLoc,0),L.value="",u(L,o,d),{nextConsumeToken:a,node:L}):(a.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,M(a)),L.value=a.value||"",u(L,s.currentOffset(),s.currentPosition()),{node:L})}function I(s,a){const E=s.context(),o=p(7,E.offset,E.startLoc);return o.value=a,u(o,s.currentOffset(),s.currentPosition()),o}function S(s){const a=s.context(),E=p(6,a.offset,a.startLoc);let o=s.nextToken();if(o.type===8){const d=D(s);E.modifier=d.node,o=d.nextConsumeToken||s.nextToken()}switch(o.type!==9&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(o)),o=s.nextToken(),o.type===2&&(o=s.nextToken()),o.type){case 10:o.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(o)),E.key=I(s,o.value||"");break;case 4:o.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(o)),E.key=T(s,o.value||"");break;case 5:o.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(o)),E.key=h(s,o.value||"");break;case 6:o.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(o)),E.key=b(s,o.value||"");break;default:{l(s,C.UNEXPECTED_EMPTY_LINKED_KEY,a.lastStartLoc,0);const d=s.context(),L=p(7,d.offset,d.startLoc);return L.value="",u(L,d.offset,d.startLoc),E.key=L,u(E,d.offset,d.startLoc),{nextConsumeToken:o,node:E}}}return u(E,s.currentOffset(),s.currentPosition()),{node:E}}function v(s){const a=s.context(),E=a.currentType===1?s.currentOffset():a.offset,o=a.currentType===1?a.endLoc:a.startLoc,d=p(2,E,o);d.items=[];let L=null;do{const m=L||s.nextToken();switch(L=null,m.type){case 0:m.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(m)),d.items.push(k(s,m.value||""));break;case 5:m.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(m)),d.items.push(h(s,m.value||""));break;case 4:m.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(m)),d.items.push(T(s,m.value||""));break;case 6:m.value==null&&l(s,C.UNEXPECTED_LEXICAL_ANALYSIS,a.lastStartLoc,0,M(m)),d.items.push(b(s,m.value||""));break;case 7:{const $=S(s);d.items.push($.node),L=$.nextConsumeToken||null;break}}}while(a.currentType!==13&&a.currentType!==1);const N=a.currentType===1?a.lastOffset:s.currentOffset(),w=a.currentType===1?a.lastEndLoc:s.currentPosition();return u(d,N,w),d}function U(s,a,E,o){const d=s.context();let L=o.items.length===0;const N=p(1,a,E);N.cases=[],N.cases.push(o);do{const w=v(s);L||(L=w.items.length===0),N.cases.push(w)}while(d.currentType!==13);return L&&l(s,C.MUST_HAVE_MESSAGES_IN_PLURAL,E,0),u(N,s.currentOffset(),s.currentPosition()),N}function y(s){const a=s.context(),{offset:E,startLoc:o}=a,d=v(s);return a.currentType===13?d:U(s,E,o,d)}function _(s){const a=De(s,te({},r)),E=a.context(),o=p(0,E.offset,E.startLoc);return n&&o.loc&&(o.loc.source=s),o.body=y(a),r.onCacheKey&&(o.cacheKey=r.onCacheKey(s)),E.currentType!==13&&l(a,C.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,s[E.offset]||""),u(o,a.currentOffset(),a.currentPosition()),o}return{parse:_}}function M(r){if(r.type===13)return"EOF";const n=(r.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"…":n}function Xe(r,n={}){const c={ast:r,helpers:new Set};return{context:()=>c,helper:u=>(c.helpers.add(u),u)}}function z(r,n){for(let c=0;c<r.length;c++)Q(r[c],n)}function Q(r,n){switch(r.type){case 1:z(r.cases,n),n.helper("plural");break;case 2:z(r.items,n);break;case 6:{Q(r.key,n),n.helper("linked"),n.helper("type");break}case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function we(r,n={}){const c=Xe(r);c.helper("normalize"),r.body&&Q(r.body,c);const l=c.context();r.helpers=Array.from(l.helpers)}function Ye(r){const n=r.body;return n.type===2?ee(n):n.cases.forEach(c=>ee(c)),r}function ee(r){if(r.items.length===1){const n=r.items[0];(n.type===3||n.type===9)&&(r.static=n.value,delete n.value)}else{const n=[];for(let c=0;c<r.items.length;c++){const l=r.items[c];if(!(l.type===3||l.type===9)||l.value==null)break;n.push(l.value)}if(n.length===r.items.length){r.static=ne(n);for(let c=0;c<r.items.length;c++){const l=r.items[c];(l.type===3||l.type===9)&&delete l.value}}}}function K(r){switch(r.t=r.type,r.type){case 0:{const n=r;K(n.body),n.b=n.body,delete n.body;break}case 1:{const n=r,c=n.cases;for(let l=0;l<c.length;l++)K(c[l]);n.c=c,delete n.cases;break}case 2:{const n=r,c=n.items;for(let l=0;l<c.length;l++)K(c[l]);n.i=c,delete n.items,n.static&&(n.s=n.static,delete n.static);break}case 3:case 9:case 8:case 7:{const n=r;n.value&&(n.v=n.value,delete n.value);break}case 6:{const n=r;K(n.key),n.k=n.key,delete n.key,n.modifier&&(K(n.modifier),n.m=n.modifier,delete n.modifier);break}case 5:{const n=r;n.i=n.index,delete n.index;break}case 4:{const n=r;n.k=n.key,delete n.key;break}}delete r.type}function $e(r,n){const{sourceMap:c,filename:l,breakLineCode:p,needIndent:u}=n,k=n.location!==!1,h={filename:l,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:p,needIndent:u,indentLevel:0};k&&r.loc&&(h.source=r.loc.source);const T=()=>h;function b(_,s){h.code+=_}function D(_,s=!0){const a=s?p:"";b(u?a+"  ".repeat(_):a)}function I(_=!0){const s=++h.indentLevel;_&&D(s)}function S(_=!0){const s=--h.indentLevel;_&&D(s)}function v(){D(h.indentLevel)}return{context:T,push:b,indent:I,deindent:S,newline:v,helper:_=>`_${_}`,needIndent:()=>h.needIndent}}function ge(r,n){const{helper:c}=r;r.push(`${c("linked")}(`),H(r,n.key),n.modifier?(r.push(", "),H(r,n.modifier),r.push(", _type")):r.push(", undefined, _type"),r.push(")")}function Ke(r,n){const{helper:c,needIndent:l}=r;r.push(`${c("normalize")}([`),r.indent(l());const p=n.items.length;for(let u=0;u<p&&(H(r,n.items[u]),u!==p-1);u++)r.push(", ");r.deindent(l()),r.push("])")}function He(r,n){const{helper:c,needIndent:l}=r;if(n.cases.length>1){r.push(`${c("plural")}([`),r.indent(l());const p=n.cases.length;for(let u=0;u<p&&(H(r,n.cases[u]),u!==p-1);u++)r.push(", ");r.deindent(l()),r.push("])")}}function xe(r,n){n.body?H(r,n.body):r.push("null")}function H(r,n){const{helper:c}=r;switch(n.type){case 0:xe(r,n);break;case 1:He(r,n);break;case 2:Ke(r,n);break;case 6:ge(r,n);break;case 8:r.push(JSON.stringify(n.value),n);break;case 7:r.push(JSON.stringify(n.value),n);break;case 5:r.push(`${c("interpolate")}(${c("list")}(${n.index}))`,n);break;case 4:r.push(`${c("interpolate")}(${c("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:r.push(JSON.stringify(n.value),n);break;case 3:r.push(JSON.stringify(n.value),n);break}}const Ge=(r,n={})=>{const c=j(n.mode)?n.mode:"normal",l=j(n.filename)?n.filename:"message.intl",p=!!n.sourceMap,u=n.breakLineCode!=null?n.breakLineCode:c==="arrow"?";":`
`,k=n.needIndent?n.needIndent:c!=="arrow",h=r.helpers||[],T=$e(r,{mode:c,filename:l,sourceMap:p,breakLineCode:u,needIndent:k});T.push(c==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),T.indent(k),h.length>0&&(T.push(`const { ${ne(h.map(I=>`${I}: _${I}`),", ")} } = ctx`),T.newline()),T.push("return "),H(T,r),T.deindent(k),T.push("}"),delete r.helpers;const{code:b,map:D}=T.context();return{ast:r,code:b,map:D?D.toJSON():void 0}};function Je(r,n={}){const c=te({},n),l=!!c.jit,p=!!c.minify,u=c.optimize==null?!0:c.optimize,h=Me(c).parse(r);return l?(u&&Ye(h),p&&K(h),{ast:h,code:""}):(we(h,c),Ge(h,c))}export{Be as C,Je as b,re as c,Ve as d};
